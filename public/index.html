<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Nyoba Bot Ads</title>
		<style>
			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
				color: #ffffff;
				margin: 0;
				padding: 20px;
				min-height: 100vh;
				display: flex;
				justify-content: center;
				align-items: flex-start;
			}

			.main-container {
				background: rgba(0, 0, 0, 0.8);
				backdrop-filter: blur(20px);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 20px;
				padding: 30px;
				max-width: 1200px;
				width: 100%;
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
				position: relative;
				overflow: hidden;
			}

			.main-container::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				height: 1px;
				background: linear-gradient(
					90deg,
					transparent,
					rgba(255, 255, 255, 0.3),
					transparent
				);
			}

			h2 {
				text-align: center;
				margin-bottom: 30px;
				color: #4caf50;
				font-size: 2.5em;
				font-weight: 300;
				text-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
			}

			.subtitle {
				text-align: center;
				color: #ff9800;
				font-size: 1.2em;
				margin-bottom: 20px;
				font-weight: 500;
			}

			/* Mode Toggle */
			.mode-toggle {
				display: flex;
				justify-content: center;
				margin-bottom: 30px;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 15px;
				padding: 10px;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}

			.mode-btn {
				flex: 1;
				padding: 15px 20px;
				background: transparent;
				color: #ffffff;
				border: none;
				border-radius: 10px;
				cursor: pointer;
				font-size: 16px;
				font-weight: 600;
				transition: all 0.3s ease;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.mode-btn.active {
				background: linear-gradient(135deg, #4caf50, #45a049);
				box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
				transform: translateY(-2px);
			}

			.mode-btn:not(.active):hover {
				background: rgba(255, 255, 255, 0.1);
			}

			/* Mode-specific content */
			.mode-content {
				display: none;
			}

			.mode-content.active {
				display: block;
			}

			label {
				display: block;
				margin-top: 15px;
				color: #ffffff;
				font-weight: 500;
				font-size: 14px;
			}

			input,
			select,
			button,
			textarea {
				margin-top: 8px;
				padding: 12px 15px;
				width: 100%;
				box-sizing: border-box;
				background: rgba(255, 255, 255, 0.1);
				color: #ffffff;
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 10px;
				font-size: 14px;
				transition: all 0.3s ease;
				backdrop-filter: blur(10px);
			}

			input:focus,
			select:focus,
			button:focus,
			textarea:focus {
				outline: none;
				border-color: #4caf50;
				box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);
				background: rgba(255, 255, 255, 0.15);
			}

			/* Checkbox styling */
			.checkbox-container {
				display: flex;
				align-items: center;
				gap: 10px;
				margin-top: 15px;
				padding: 12px 15px;
				background: rgba(255, 255, 255, 0.05);
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 10px;
				cursor: pointer;
				transition: all 0.3s ease;
			}

			.checkbox-container:hover {
				background: rgba(255, 255, 255, 0.1);
			}

			.checkbox-container input[type="checkbox"] {
				width: 20px;
				height: 20px;
				margin: 0;
				cursor: pointer;
				accent-color: #4caf50;
			}

			.checkbox-label {
				color: #ffffff;
				font-weight: 500;
				font-size: 14px;
				cursor: pointer;
				margin: 0;
			}

			button {
				margin-top: 20px;
				background: linear-gradient(135deg, #4caf50, #45a049);
				color: #ffffff;
				border: none;
				cursor: pointer;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 1px;
				position: relative;
				overflow: hidden;
			}

			button::before {
				content: '';
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(
					90deg,
					transparent,
					rgba(255, 255, 255, 0.2),
					transparent
				);
				transition: left 0.5s;
			}

			button:hover::before {
				left: 100%;
			}

			button:hover {
				background: linear-gradient(135deg, #45a049, #4caf50);
				transform: translateY(-2px);
				box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
			}

			/* Stop button styling */
			#stopButton {
				background: linear-gradient(135deg, #f44336, #d32f2f);
				display: none;
			}

			#stopButton:hover {
				background: linear-gradient(135deg, #d32f2f, #f44336);
			}

			#status {
				margin-top: 25px;
				font-weight: 600;
				color: #4caf50;
				text-align: center;
				padding: 15px;
				background: rgba(76, 175, 80, 0.1);
				border-radius: 10px;
				border: 1px solid rgba(76, 175, 80, 0.3);
			}

			#combinedURL {
				background: rgba(0, 0, 0, 0.3);
				color: #ff9800;
				border: 1px solid rgba(255, 152, 0, 0.3);
				font-family: 'Courier New', monospace;
			}

			#blogURL,
			#ProxyURL,
			#directLinkURL {
				color: #00ffd2;
			}

			/* Direct Link specific styling */
			.direct-link-info {
				background: linear-gradient(135deg, rgba(33, 150, 243, 0.15), rgba(156, 39, 176, 0.1));
				border: 2px solid rgba(33, 150, 243, 0.4);
				border-radius: 15px;
				padding: 20px;
				margin: 20px 0;
				box-shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
			}

			.direct-link-info h3 {
				color: #2196f3;
				margin-top: 0;
				font-size: 1.3em;
				text-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
			}

			/* LEGIT ad targeting info */
			.ad-info {
				background: linear-gradient(135deg, rgba(255, 152, 0, 0.15), rgba(76, 175, 80, 0.1));
				border: 2px solid rgba(255, 152, 0, 0.4);
				border-radius: 15px;
				padding: 20px;
				margin: 20px 0;
				box-shadow: 0 10px 30px rgba(255, 152, 0, 0.2);
			}

			.ad-info h3 {
				color: #ff9800;
				margin-top: 0;
				font-size: 1.3em;
				text-shadow: 0 0 10px rgba(255, 152, 0, 0.5);
			}

			.ad-info ul,
			.direct-link-info ul {
				margin: 15px 0;
				padding-left: 25px;
			}

			.ad-info li,
			.direct-link-info li {
				color: #ffffff;
				margin: 8px 0;
				font-size: 14px;
				font-weight: 500;
			}

			.legit-highlight {
				color: #4caf50;
				font-weight: bold;
				text-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
			}

			.direct-highlight {
				color: #2196f3;
				font-weight: bold;
				text-shadow: 0 0 5px rgba(33, 150, 243, 0.5);
			}

			/* Continuous mode styling */
			.continuous-highlight {
				color: #ff9800;
				font-weight: bold;
				text-shadow: 0 0 5px rgba(255, 152, 0, 0.5);
			}

			/* Device support info */
			.device-info {
				background: linear-gradient(135deg, rgba(33, 150, 243, 0.15), rgba(156, 39, 176, 0.1));
				border: 2px solid rgba(33, 150, 243, 0.4);
				border-radius: 15px;
				padding: 20px;
				margin: 20px 0;
				box-shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
			}

			.device-info h3 {
				color: #2196f3;
				margin-top: 0;
				font-size: 1.3em;
				text-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
			}

			.device-grid {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 15px;
				margin-top: 15px;
			}

			.device-column {
				background: rgba(0, 0, 0, 0.3);
				padding: 15px;
				border-radius: 10px;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}

			.device-column h4 {
				color: #2196f3;
				margin: 0 0 10px 0;
				font-size: 1.1em;
			}

			.device-column ul {
				margin: 0;
				padding-left: 20px;
			}

			.device-column li {
				color: #ffffff;
				margin: 5px 0;
				font-size: 13px;
			}

			/* Profile logs styles - enhanced for legit tracking */
			.profile-logs-container {
				display: none;
				margin-top: 30px;
				background: rgba(0, 0, 0, 0.5);
				border-radius: 15px;
				padding: 20px;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}

			.profile-logs-container h3 {
				text-align: center;
				color: #4caf50;
				margin-bottom: 20px;
				font-size: 1.5em;
				text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
			}

			.profile-logs-grid {
				display: grid;
				gap: 20px;
				margin-top: 20px;
				grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
			}

			.profile-log-item {
				background: rgba(0, 0, 0, 0.7);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 15px;
				padding: 20px;
				min-height: 350px;
				display: flex;
				flex-direction: column;
				backdrop-filter: blur(10px);
				transition: all 0.3s ease;
			}

			.profile-log-item:hover {
				border-color: rgba(76, 175, 80, 0.3);
				box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
			}

			.profile-log-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 15px;
				padding-bottom: 12px;
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
				flex-shrink: 0;
			}

			.profile-log-title {
				font-weight: 600;
				color: #4caf50;
				font-size: 16px;
			}

			.profile-time {
				color: #ff9800;
				font-weight: 500;
				font-size: 14px;
				margin-left: 8px;
			}

			.profile-log-status {
				padding: 6px 12px;
				border-radius: 20px;
				font-size: 12px;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.profile-log-status.waiting {
				background: linear-gradient(135deg, #ff9800, #f57c00);
				color: #000;
			}

			.profile-log-status.running {
				background: linear-gradient(135deg, #4caf50, #45a049);
				color: #fff;
				animation: pulse 2s infinite;
			}

			.profile-log-status.completed {
				background: linear-gradient(135deg, #2196f3, #1976d2);
				color: #fff;
			}

			.profile-log-status.error {
				background: linear-gradient(135deg, #f44336, #d32f2f);
				color: #fff;
			}

			.profile-log-status.success {
				background: linear-gradient(135deg, #2196f3, #1976d2);
				color: #fff;
			}

			@keyframes pulse {
				0% { opacity: 1; }
				50% { opacity: 0.7; }
				100% { opacity: 1; }
			}

			.profile-log-area {
				width: 100%;
				height: 250px;
				padding: 15px;
				font-family: 'Courier New', monospace;
				background: rgba(0, 0, 0, 0.8);
				color: #00ff00;
				border: 1px solid rgba(0, 255, 0, 0.2);
				border-radius: 10px;
				resize: none;
				white-space: pre-wrap;
				font-size: 12px;
				flex: 1;
				min-height: 250px;
				backdrop-filter: blur(5px);
			}

			/* Error message styling */
			.error-message {
				color: #ff4444;
				font-weight: bold;
			}

			/* Success message styling */
			.success-message {
				color: #4caf50;
				font-weight: bold;
			}

			/* Warning message styling */
			.warning-message {
				color: #ff9800;
				font-weight: bold;
			}

			/* Hide form during automation */
			.automation-running .form-container {
				display: none;
			}

			.automation-running .profile-logs-container {
				display: block;
			}

			/* Progress indicator - enhanced */
			.progress-indicator {
				display: none;
				margin: 25px 0;
				padding: 20px;
				background: rgba(0, 0, 0, 0.5);
				border-radius: 15px;
				border: 1px solid rgba(255, 255, 255, 0.1);
				backdrop-filter: blur(10px);
			}

			.progress-sections {
				display: flex;
				gap: 20px;
				margin-bottom: 20px;
			}

			.progress-section {
				flex: 1;
				background: rgba(0, 0, 0, 0.3);
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 12px;
				padding: 15px;
				backdrop-filter: blur(5px);
			}

			.section-title {
				font-size: 14px;
				font-weight: 600;
				color: #4caf50;
				margin-bottom: 10px;
				text-align: center;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.section-content {
				display: flex;
				flex-direction: column;
				gap: 8px;
			}

			.progress-text,
			.cycle-text,
			.completed-text,
			.failed-text,
			.total-text {
				font-size: 14px;
				font-weight: 500;
				color: #ffffff;
				text-align: center;
			}

			.progress-text {
				color: #4caf50;
				font-weight: bold;
			}

			.cycle-text {
				color: #2196f3;
				font-weight: bold;
			}

			.completed-text {
				color: #4caf50;
				font-weight: bold;
			}

			.failed-text {
				color: #ff8f00;
				font-weight: bold;
			}

			.success-text {
				color: #2196f3;
				font-weight: bold;
			}

			.total-text {
				color: #ff9800;
				font-weight: bold;
			}

			.progress-bar {
				width: 100%;
				height: 25px;
				background: rgba(255, 255, 255, 0.1);
				border-radius: 15px;
				overflow: hidden;
				margin: 15px 0;
				border: 1px solid rgba(255, 255, 255, 0.2);
			}

			.progress-fill {
				height: 100%;
				background: linear-gradient(90deg, #4caf50, #45a049);
				transition: width 0.3s ease;
				width: 0%;
				border-radius: 15px;
			}

			.progress-text {
				text-align: center;
				font-weight: 600;
				color: #4caf50;
				font-size: 16px;
			}

			.automation-running .progress-indicator {
				display: block;
			}

			/* Responsive design for smaller screens */
			@media (max-width: 768px) {
				body {
					padding: 10px;
				}

				.main-container {
					padding: 20px;
					border-radius: 15px;
				}

				h2 {
					font-size: 2em;
				}

				.progress-sections {
					flex-direction: column;
					gap: 15px;
				}

				.progress-section {
					padding: 12px;
				}

				.section-title {
					font-size: 12px;
				}

				.progress-text,
				.cycle-text,
				.completed-text,
				.failed-text,
				.total-text {
					font-size: 13px;
				}

				.profile-logs-grid {
					grid-template-columns: 1fr;
					gap: 15px;
				}

				.profile-log-item {
					min-height: 300px;
					padding: 15px;
				}

				.profile-log-area {
					height: 200px;
					min-height: 200px;
					font-size: 11px;
				}

				.device-grid {
					grid-template-columns: 1fr;
					gap: 10px;
				}

				.mode-toggle {
					flex-direction: column;
					gap: 10px;
				}
			}

			/* Small text styling */
			small {
				background: rgba(255, 255, 255, 0.1);
				color: #ffffff;
				font-size: 13px;
				font-weight: 500;
				padding: 8px 12px;
				border-radius: 8px;
				display: block;
				margin-top: 5px;
				border: 1px solid rgba(255, 255, 255, 0.2);
			}

			/* Popup Overlay */
			.popup-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.8);
				backdrop-filter: blur(10px);
				display: none;
				justify-content: center;
				align-items: center;
				z-index: 1000;
				animation: fadeIn 0.3s ease;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
				}
				to {
					opacity: 1;
				}
			}

			.popup-container {
				background: rgba(0, 0, 0, 0.9);
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 20px;
				padding: 0;
				max-width: 500px;
				width: 90%;
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
				backdrop-filter: blur(20px);
				animation: slideIn 0.3s ease;
			}

			@keyframes slideIn {
				from {
					transform: translateY(-50px);
					opacity: 0;
				}
				to {
					transform: translateY(0);
					opacity: 1;
				}
			}

			.popup-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 20px 25px 15px 25px;
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			}

			.popup-header h3 {
				margin: 0;
				color: #4caf50;
				font-size: 1.5em;
				font-weight: 600;
			}

			.popup-close {
				background: none;
				border: none;
				color: #ffffff;
				font-size: 24px;
				cursor: pointer;
				padding: 0;
				width: 30px;
				height: 30px;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 50%;
				transition: all 0.3s ease;
			}

			.popup-close:hover {
				background: rgba(255, 255, 255, 0.1);
				color: #f44336;
			}

			.popup-content {
				padding: 25px;
				color: #ffffff;
				line-height: 1.6;
			}

			.popup-content .data-item {
				display: flex;
				justify-content: space-between;
				margin-bottom: 12px;
				padding: 8px 12px;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 8px;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}

			.popup-content .data-label {
				font-weight: 600;
				color: #4caf50;
			}

			.popup-content .data-value {
				color: #ffffff;
				font-weight: 500;
			}

			.popup-actions {
				display: flex;
				gap: 15px;
				padding: 20px 25px 25px 25px;
				border-top: 1px solid rgba(255, 255, 255, 0.1);
			}

			.popup-btn {
				flex: 1;
				padding: 12px 20px;
				border: none;
				border-radius: 10px;
				font-size: 14px;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.popup-btn-cancel {
				background: rgba(255, 255, 255, 0.1);
				color: #ffffff;
				border: 1px solid rgba(255, 255, 255, 0.2);
			}

			.popup-btn-cancel:hover {
				background: rgba(255, 255, 255, 0.2);
				transform: translateY(-2px);
			}

			.popup-btn-confirm {
				background: linear-gradient(135deg, #4caf50, #45a049);
				color: #ffffff;
			}

			.popup-btn-confirm:hover {
				background: linear-gradient(135deg, #45a049, #4caf50);
				transform: translateY(-2px);
				box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
			}

			.popup-btn.stop {
				background: linear-gradient(135deg, #f44336, #d32f2f);
			}

			.popup-btn.stop:hover {
				background: linear-gradient(135deg, #d32f2f, #f44336);
				box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);
			}

			.status-row {
				display: flex;
				justify-content: space-between;
				align-items: center;
				gap: 15px;
			}

			.status-row span {
				flex: 1;
				text-align: center;
				padding: 8px 12px;
				border-radius: 8px;
				background: rgba(255, 255, 255, 0.05);
				border: 1px solid rgba(255, 255, 255, 0.1);
				font-size: 13px;
				font-weight: 600;
			}
		</style>
	</head>
	<body>
		<div class="main-container">
			<h2>🚀 LEGIT Traffic Controller</h2>
			<div class="subtitle">🎯 ProfitableRate Ad Clicks & Direct Link Views</div>

			<!-- Mode Toggle -->
			<div class="mode-toggle">
				<button class="mode-btn active" id="adModeBtn" onclick="switchMode('ad')">
					🎯 AD CLICKING MODE
				</button>
				<button class="mode-btn" id="directModeBtn" onclick="switchMode('direct')">
					🔗 DIRECT LINK VIEWER
				</button>
			</div>

			<div class="form-container">
				<!-- Ad Clicking Mode -->
				<div class="mode-content active" id="adModeContent">
					<div class="ad-info">
						<h3>🎯 LEGIT Ad Network Targeting</h3>
						<ul>
							<li>✅ <span class="legit-highlight">Direct ProfitableRateCPM link detection</span> - Clicks real ad URLs</li>
							<li>✅ <span class="legit-highlight">HighPerformanceFormat banner targeting</span> - 320x50 ads specifically</li>
							<li>✅ <span class="legit-highlight">Script-generated ad element detection</span> - From loaded JS ads</li>
							<li>✅ <span class="legit-highlight">Social bar & popunder interaction</span> - pl27406930, pl27406938 scripts</li>
							<li>✅ <span class="legit-highlight">Data-key specific targeting</span> - dac5bd782390c09ca3783e4361641fe1, bed062db9e271d1ad41b99f36e2c623c</li>
							<li>✅ <span class="legit-highlight">Extended popup wait time</span> - Ensures traffic registration</li>
							<li>✅ <span class="legit-highlight">Natural browsing patterns</span> - Realistic user behavior simulation</li>
						</ul>
					</div>

					<form id="automationForm">
						<label for="blogURL">Target Website URL:</label>
						<input
							type="text"
							name="blogURL"
							id="blogURL"
							value="https://trijayaagunglestari.web.id"
							required
						/>
						<small>Target website with LEGIT ad networks for proper traffic counting</small>

						<label for="ProxyURL">Proxy URL (Optional):</label>
						<input
							type="text"
							name="ProxyURL"
							id="ProxyURL"
							value="http://api.scrape.do?token=17816104c7834853af9ebdae785d3a756ce15798bcc&url="
						/>
						<small>Used for geo-targeting and fingerprinting. Website loads directly for full functionality.</small>

						<label for="combinedURL">Reference URL (Auto-generated)</label>
						<textarea
							id="combinedURL"
							name="combinedURL"
							disabled
							style="
								width: 100%;
								font-family: monospace;
								resize: vertical;
								min-height: 100px;
								max-height: 120px;
								overflow: auto;
							"
						></textarea>

						<label for="browser">Browser Preference:</label>
						<select name="browser" id="browser">
							<option value="random">Random (Chrome/Edge)</option>
							<option value="chromium">Chrome Only</option>
							<option value="webkit">Edge Only</option>
						</select>
						<small>Chrome and Edge only for better ad compatibility. 30% mobile traffic included.</small>

						<label for="openCount">Number of Cycles:</label>
						<input
							type="number"
							name="openCount"
							id="openCount"
							min="1"
							max="20"
							value="3"
							required
						/>

						<label for="profilesAtOnce">Profiles per Cycle:</label>
						<input
							type="number"
							name="profilesAtOnce"
							id="profilesAtOnce"
							min="1"
							max="10"
							value="2"
							required
						/>

						<label for="timeout">Website Loading Timeout (seconds):</label>
						<input
							type="number"
							name="timeout"
							id="timeout"
							min="10"
							max="120"
							value="40"
							required
						/>
						<small>Extended timeout for complete ad script loading and execution</small>

						<label for="minWaitTime">Minimum Session Time (seconds):</label>
						<input
							type="number"
							name="minWaitTime"
							id="minWaitTime"
							min="30"
							max="120"
							value="75"
							required
						/>
						<small>Extended time for LEGIT ad detection and clicking (60% of time dedicated to ads)</small>

						<label for="maxWaitTime">Maximum Session Time (seconds):</label>
						<input
							type="number"
							name="maxWaitTime"
							id="maxWaitTime"
							min="30"
							max="120"
							value="90"
							required
						/>
						<small>Maximum session time with comprehensive LEGIT ad interaction and traffic registration</small>

						<div class="control-buttons">
							<button type="submit" id="startButton">🚀 Start LEGIT Ad Traffic</button>
						</div>
					</form>
				</div>

				<!-- Direct Link Viewer Mode -->
				<div class="mode-content" id="directModeContent">
					<div class="direct-link-info">
						<h3>🔗 Direct Link Viewer</h3>
						<ul>
							<li>✅ <span class="direct-highlight">Direct traffic to specific URLs</span> - Pure page views without ads</li>
							<li>✅ <span class="direct-highlight">Human-like browsing simulation</span> - Realistic mouse movements and scrolling</li>
							<li>✅ <span class="direct-highlight">Full page load waiting</span> - Ensures all content is loaded</li>
							<li>✅ <span class="direct-highlight">Reading behavior simulation</span> - Mimics real user engagement</li>
							<li>✅ <span class="continuous-highlight">Continuous Looping System</span> - Runs indefinitely until stopped</li>
							<li>✅ <span class="continuous-highlight">Smart Browser Management</span> - Replaces completed browsers with new ones</li>
						</ul>
					</div>

					<form id="directLinkForm">
						<label for="directLinkURL">Direct Link URL:</label>
						<input
							type="text"
							name="directLinkURL"
							id="directLinkURL"
							value="https://www.profitableratecpm.com/tttah0a7?key=bed062db9e271d1ad41b99f36e2c623c"
							required
						/>
						<small>Direct URL to visit - no proxy needed, loads directly for maximum compatibility</small>

						<label for="directLinkViews">Concurrent Browser Limit:</label>
						<input
							type="number"
							name="directLinkViews"
							id="directLinkViews"
							min="1"
							max="50"
							value="10"
							required
						/>
						<small>Maximum number of browsers running simultaneously (others queue automatically)</small>

						<div class="checkbox-container" onclick="toggleContinuous()">
							<input type="checkbox" id="continuousMode" name="continuousMode" checked>
							<label class="checkbox-label" for="continuousMode">🔄 Continuous Mode - Run indefinitely until stopped</label>
						</div>
						<small>When enabled, new browsers automatically replace completed ones in an infinite loop</small>

						<label for="directMinTime">Minimum View Duration (seconds):</label>
						<input
							type="number"
							name="directMinTime"
							id="directMinTime"
							min="5"
							max="300"
							value="30"
							required
						/>

						<label for="directMaxTime">Maximum View Duration (seconds):</label>
						<input
							type="number"
							name="directMaxTime"
							id="directMaxTime"
							min="5"
							max="300"
							value="60"
							required
						/>
						<small>Random duration between min and max for each view to appear more natural</small>

						<label for="directBrowser">Browser Preference:</label>
						<select name="directBrowser" id="directBrowser">
							<option value="random">Random (Chrome/Edge)</option>
							<option value="chromium">Chrome Only</option>
							<option value="webkit">Edge Only</option>
						</select>
						<small>Browser choice for direct link views. Includes mobile traffic simulation (30%)</small>

						<label for="directTimeout">Page Load Timeout (seconds):</label>
						<input
							type="number"
							name="directTimeout"
							id="directTimeout"
							min="10"
							max="120"
							value="30"
							required
						/>
						<small>Maximum time to wait for page to fully load before starting interaction</small>

						<div class="control-buttons">
							<button type="submit" id="startDirectButton">🔗 Start Direct Link Views</button>
						</div>
					</form>
				</div>

				<div class="device-info">
					<h3>📱 Multi-Device Traffic Simulation</h3>
					<div class="device-grid">
						<div class="device-column">
							<h4>🖥️ Desktop (70%)</h4>
							<ul>
								<li>Chrome 120.0.0.0 (Windows 10/11)</li>
								<li>Edge 120.0.0.0 (Windows 10/11)</li>
								<li>Chrome (macOS Sonoma)</li>
								<li>Edge (macOS Sonoma)</li>
							</ul>
						</div>
						<div class="device-column">
							<h4>📱 Mobile (30%)</h4>
							<ul>
								<li>Chrome Mobile (Android 13)</li>
								<li>Edge Mobile (Android 12/13)</li>
								<li>Chrome iOS (iPhone 14/15)</li>
								<li>Edge iOS (iPhone models)</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<!-- Stop button outside the form container -->
			<button
				type="button"
				id="stopButton"
				style="
					display: none;
					margin-top: 15px;
					width: 100%;
					background-color: #f44336;
					color: #ffffff;
					border: none;
					cursor: pointer;
					padding: 6px;
					font-size: large;
				"
			>
				🛑 Stop Traffic
			</button>

			<!-- Progress indicator -->
			<div class="progress-indicator" id="progressIndicator">
				<div class="progress-sections">
					<div class="progress-section">
						<div class="section-title">Progress & Mode</div>
						<div class="section-content">
							<div class="status-row">
								<span class="progress-text" id="progressText">Progress: 0%</span>
								<span class="cycle-text" id="modeText">Mode: Ready</span>
							</div>
						</div>
					</div>
					<div class="progress-section">
						<div class="section-title">Browser Status</div>
						<div class="section-content">
							<div class="status-row">
								<span class="completed-text" id="completedText"
									>Completed: 0/0</span
								>
								<span class="success-text" id="successText">Active: 0</span>
								<span class="failed-text" id="failedText">Failed: 0</span>
							</div>
						</div>
					</div>
					<div class="progress-section">
						<div class="section-title">Total Views</div>
						<div class="section-content">
							<div class="status-row">
								<span class="total-text" id="totalText">Total Views: 0</span>
							</div>
						</div>
					</div>
				</div>
				<div class="progress-bar">
					<div class="progress-fill" id="progressFill"></div>
				</div>
			</div>

			<div id="status">Status: Ready for traffic generation - Choose mode above...</div>

			<!-- Profile logs container -->
			<div class="profile-logs-container" id="profileLogsContainer">
				<h3 id="logsTitle">📊 LEGIT Ad Traffic Logs - Real Network Interaction</h3>
				<div class="profile-logs-grid" id="profileLogsGrid"></div>
			</div>
		</div>

		<!-- Confirmation Popup -->
		<div class="popup-overlay" id="popupOverlay">
			<div class="popup-container" id="popupContainer">
				<div class="popup-header">
					<h3 id="popupTitle">Confirmation</h3>
					<button class="popup-close" id="popupClose">&times;</button>
				</div>
				<div class="popup-content" id="popupContent">
					<!-- Content will be dynamically set -->
				</div>
				<div class="popup-actions">
					<button class="popup-btn popup-btn-cancel" id="popupCancel">Cancel</button>
					<button class="popup-btn popup-btn-confirm" id="popupConfirm">Confirm</button>
				</div>
			</div>
		</div>

		<script>
			const form = document.getElementById('automationForm');
			const directForm = document.getElementById('directLinkForm');
			const statusDiv = document.getElementById('status');
			const startButton = document.getElementById('startButton');
			const startDirectButton = document.getElementById('startDirectButton');
			const stopButton = document.getElementById('stopButton');
			const profileLogsGrid = document.getElementById('profileLogsGrid');
			const logsTitle = document.getElementById('logsTitle');
			const progressIndicator = document.getElementById('progressIndicator');
			const progressText = document.getElementById('progressText');
			const progressFill = document.getElementById('progressFill');
			const modeText = document.getElementById('modeText');
			const completedText = document.getElementById('completedText');
			const failedText = document.getElementById('failedText');
			const successText = document.getElementById('successText');
			const totalText = document.getElementById('totalText');

			// Mode switching functionality
			let currentMode = 'ad'; // Default to ad mode

			function switchMode(mode) {
				currentMode = mode;
				
				// Update button states
				document.getElementById('adModeBtn').classList.toggle('active', mode === 'ad');
				document.getElementById('directModeBtn').classList.toggle('active', mode === 'direct');
				
				// Update content visibility
				document.getElementById('adModeContent').classList.toggle('active', mode === 'ad');
				document.getElementById('directModeContent').classList.toggle('active', mode === 'direct');
				
				// Update status text
				if (mode === 'ad') {
					statusDiv.innerText = 'Status: Ready for LEGIT ad traffic generation with focused network targeting...';
				} else {
					statusDiv.innerText = 'Status: Ready for direct link traffic generation...';
				}
			}

			// Continuous mode toggle
			function toggleContinuous() {
				const checkbox = document.getElementById('continuousMode');
				checkbox.checked = !checkbox.checked;
			}

			// Popup elements
			const popupOverlay = document.getElementById('popupOverlay');
			const popupContainer = document.getElementById('popupContainer');
			const popupTitle = document.getElementById('popupTitle');
			const popupContent = document.getElementById('popupContent');
			const popupClose = document.getElementById('popupClose');
			const popupCancel = document.getElementById('popupCancel');
			const popupConfirm = document.getElementById('popupConfirm');

			// Profile log areas
			let profileLogs = new Map();
			let currentProfilesCount = 0;
			let logUpdateInterval = null;
			let currentCycleProfiles = 0; // Track profiles for current cycle
			let eventSource = null; // SSE connection

			// Function to connect to SSE for real-time logs
			function connectToLogStream() {
				if (eventSource) {
					eventSource.close();
				}

				eventSource = new EventSource('/logs/stream');

				eventSource.onmessage = function (event) {
					try {
						const data = JSON.parse(event.data);

						if (data.type === 'log' && data.profileIndex) {
							// Immediately append log to the specific profile
							appendProfileLog(data.profileIndex, data.message);
						} else if (data.type === 'cycle_change') {
							// Handle cycle change - clear logs for new cycle
							console.log(`🔄 Cycle change detected: Cycle ${data.cycle}`);
							clearAllProfileLogs();
							currentCycle = data.cycle || 1;

							// Update cycle display
							const modeTextElement = document.getElementById('modeText');
							if (modeTextElement) {
								modeTextElement.textContent = `Cycle: ${data.cycle}`;
							}
						} else if (data.type === 'status_change' && data.profileIndex) {
							// Handle real-time status updates
							console.log(
								`📊 Status change: Profile ${data.profileIndex} -> ${data.status}`
							);
							let className = 'waiting';
							if (data.status === 'running') {
								className = 'running';
							} else if (data.status === 'completed') {
								className = 'completed';
							} else if (data.status === 'success') {
								className = 'success';
							} else if (data.status === 'failed') {
								className = 'error';
							}
							updateProfileStatus(data.profileIndex, data.status, className);
						}
					} catch (error) {
						console.error('Error parsing SSE data:', error);
					}
				};

				eventSource.onerror = function (error) {
					console.error('SSE connection error:', error);
					// Try to reconnect after 5 seconds
					setTimeout(connectToLogStream, 5000);
				};

				eventSource.onopen = function () {
					console.log('Connected to real-time log stream');
				};
			}

			// Function to disconnect from SSE
			function disconnectFromLogStream() {
				if (eventSource) {
					eventSource.close();
					eventSource = null;
				}
			}

			// Function to create profile log areas for current cycle
			function createProfileLogsForCycle(profilesCount, cycle, mode = 'ad') {
				profileLogsGrid.innerHTML = '';
				profileLogs.clear();
				currentProfilesCount = profilesCount;
				currentCycleProfiles = profilesCount;

				// Update logs title based on mode
				if (mode === 'direct') {
					logsTitle.textContent = '📊 Direct Link Traffic Logs - Continuous Views';
				} else {
					logsTitle.textContent = '📊 LEGIT Ad Traffic Logs - Real Network Interaction';
				}

				for (let i = 1; i <= profilesCount; i++) {
					const logItem = document.createElement('div');
					logItem.className = 'profile-log-item';
					logItem.innerHTML = `
						<div class="profile-log-header">
							<div class="profile-log-title">${mode === 'direct' ? 'Browser' : 'Profile'} ${i} <span class="profile-time" id="profileTime${i}"></span></div>
							<div class="profile-log-status waiting" id="profileStatus${i}">Waiting</div>
						</div>
						<textarea class="profile-log-area" id="profileLog${i}" readonly placeholder="Waiting for ${mode === 'direct' ? 'continuous direct link traffic' : 'LEGIT ad traffic'} automation to start..."></textarea>
					`;
					profileLogsGrid.appendChild(logItem);

					// Store reference to log area
					profileLogs.set(i, document.getElementById(`profileLog${i}`));
				}
			}

			// Function to create profile log areas (for initial setup)
			function createProfileLogs(profilesCount, mode = 'ad') {
				createProfileLogsForCycle(profilesCount, 1, mode);
			}

			// Function to append log to specific profile
			function appendProfileLog(profileIndex, message) {
				const logArea = profileLogs.get(profileIndex);
				if (logArea) {
					logArea.value += `${message}\n`;
					logArea.scrollTop = logArea.scrollHeight;
				}
			}

			// Function to clear all profile logs
			function clearAllProfileLogs() {
				profileLogs.forEach((logArea) => {
					if (logArea) {
						logArea.value = '';
					}
				});
			}

			// Function to update profile status
			function updateProfileStatus(profileIndex, status, className) {
				const statusElement = document.getElementById(`profileStatus${profileIndex}`);
				if (statusElement) {
					statusElement.textContent = status;
					statusElement.className = `profile-log-status ${className}`;
				}
			}

			// Function to update profile times based on active window details
			function updateProfileTimes(activeWindowDetails) {
				if (!activeWindowDetails || activeWindowDetails.length === 0) return;

				// Clear all profile times first
				for (let i = 1; i <= currentProfilesCount; i++) {
					const timeElement = document.getElementById(`profileTime${i}`);
					if (timeElement) {
						timeElement.textContent = '';
					}
				}

				// Update times for active profiles
				activeWindowDetails.forEach((window) => {
					const cycleSpecificIndex =
						((window.windowIndex - 1) % currentProfilesCount) + 1;
					const timeElement = document.getElementById(`profileTime${cycleSpecificIndex}`);
					if (timeElement) {
						timeElement.textContent = `(${window.remaining}s left)`;
					}
				});
			}

			// Function to fetch and update profile logs
			async function updateProfileLogs() {
				if (currentProfilesCount === 0) return;

				try {
					const [logsResponse, statusResponse] = await Promise.all([
						fetch('/logs/profiles'),
						fetch('/automation-status')
					]);

					const logsData = await logsResponse.json();
					const statusData = await statusResponse.json();

					if (logsData.success && logsData.profileLogs) {
						// Check if we have cycle info and need to update profile areas
						if (
							logsData.currentCycle &&
							logsData.profilesPerCycle &&
							logsData.currentCycle !== currentCycle
						) {
							// Clear logs when starting a new cycle
							clearAllProfileLogs();

							currentCycle = logsData.currentCycle;
							currentProfilesCount = logsData.profilesPerCycle;
							currentCycleProfiles = logsData.profilesPerCycle;
							createProfileLogsForCycle(
								logsData.profilesPerCycle,
								logsData.currentCycle,
								currentMode
							);
						}

						for (let i = 1; i <= currentProfilesCount; i++) {
							const profileLog = logsData.profileLogs[i];
							if (profileLog) {
								const logArea = profileLogs.get(i);
								if (logArea) {
									logArea.value = profileLog;
									logArea.scrollTop = logArea.scrollHeight;
								}
							}
						}

						// Update profile statuses
						if (logsData.success && logsData.profileStatuses) {
							for (let i = 1; i <= currentProfilesCount; i++) {
								const status = logsData.profileStatuses[i];
								if (status) {
									let className = 'waiting';
									if (status === 'running') {
										className = 'running';
									} else if (status === 'completed') {
										className = 'completed';
									} else if (status === 'success') {
										className = 'success';
									} else if (status === 'failed') {
										className = 'error';
									}
									updateProfileStatus(i, status, className);
								}
							}
						}

						// Update profile times from status data
						if (
							statusData.activeWindowDetails &&
							statusData.activeWindowDetails.length > 0
						) {
							updateProfileTimes(statusData.activeWindowDetails);
						}
					}
				} catch (error) {
					console.error('Failed to fetch profile logs:', error);
				}
			}

			// Function to start log updates
			function startLogUpdates() {
				if (logUpdateInterval) {
					clearInterval(logUpdateInterval);
				}
				logUpdateInterval = setInterval(updateProfileLogs, 1000);
			}

			// Function to stop log updates
			function stopLogUpdates() {
				if (logUpdateInterval) {
					clearInterval(logUpdateInterval);
					logUpdateInterval = null;
				}
			}

			// Function to enable/disable form during automation
			function setAutomationState(isRunning) {
				if (isRunning) {
					document.body.classList.add('automation-running');
					startButton.style.display = 'none';
					startDirectButton.style.display = 'none';
					stopButton.style.display = 'block';
					startLogUpdates();
					connectToLogStream(); // Start SSE connection
				} else {
					document.body.classList.remove('automation-running');
					startButton.style.display = 'block';
					startDirectButton.style.display = 'block';
					stopButton.style.display = 'none';
					stopLogUpdates();
					disconnectFromLogStream(); // Close SSE connection
				}
			}

			// Update combined URL field live (only for ad mode)
			function updateCombinedURL() {
				if (currentMode === 'ad') {
					const blogURLValue = document.getElementById('blogURL').value;
					const proxyURLValue = document.getElementById('ProxyURL').value;
					document.getElementById('combinedURL').value =
						proxyURLValue + encodeURIComponent(blogURLValue);
				}
			}
			document.getElementById('blogURL').addEventListener('input', updateCombinedURL);
			updateCombinedURL();

			// Track current cycle for UI updates
			let currentCycle = 1; // Initialize to 1 to match backend

			// Popup utility functions
			function showPopup(title, content, confirmText = 'Confirm', isStopPopup = false) {
				popupTitle.textContent = title;
				popupContent.innerHTML = content;
				popupConfirm.textContent = confirmText;

				if (isStopPopup) {
					popupConfirm.classList.add('stop');
				} else {
					popupConfirm.classList.remove('stop');
				}

				popupOverlay.style.display = 'flex';
			}

			function hidePopup() {
				popupOverlay.style.display = 'none';
			}

			// Popup event listeners
			popupClose.addEventListener('click', hidePopup);
			popupCancel.addEventListener('click', hidePopup);
			popupOverlay.addEventListener('click', (e) => {
				if (e.target === popupOverlay) {
					hidePopup();
				}
			});

			async function checkStatus() {
				try {
					const response = await fetch('/automation-status');
					const data = await response.json();

					if (data.status === 'completed') {
						const modeText = currentMode === 'direct' ? 'direct link views' : 'LEGIT ad traffic';
						statusDiv.innerText = `Status: ${modeText} completed ✅`;
						setAutomationState(false);
					} else if (data.activeWindows > 0) {
						// Create status with only active window details
						const modeText = currentMode === 'direct' ? 'direct link traffic' : 'LEGIT ad traffic';
						let statusText = `Running: ${data.activeWindows} browsers actively generating ${modeText}`;

						// Add active window details in compact format
						if (data.activeWindowDetails && data.activeWindowDetails.length > 0) {
							const activeDetails = data.activeWindowDetails
								.map((w) => `B${w.windowIndex}`)
								.join(', ');

							// Update profile times in log headers
							updateProfileTimes(data.activeWindowDetails);
						}

						statusDiv.innerText = statusText;

						// Update progress bar and sections
						if (currentMode === 'direct' && data.continuousMode) {
							// Continuous mode - show different metrics
							modeText.textContent = 'Mode: Continuous';
							progressFill.style.width = '100%'; // Always 100% in continuous mode
							progressText.textContent = 'Continuous Mode';
						} else {
							progressFill.style.width = `${data.progress}%`;
							progressText.textContent = `Progress: ${data.progress}%`;
							modeText.textContent = `Mode: ${currentMode === 'direct' ? 'Direct Views' : 'Ad Traffic'}`;
						}
						
						completedText.textContent = `Completed: ${data.completedWindows || 0}`;
						successText.textContent = `Active: ${data.activeWindows || 0}`;
						failedText.textContent = `Failed: ${data.failedWindows || 0}`;
						totalText.textContent = `Total Views: ${data.totalViews || 0}`;

						setAutomationState(true);
					} else if (data.status === 'idle') {
						const modeText = currentMode === 'direct' ? 'direct link traffic generation' : 'LEGIT ad traffic generation with focused network targeting';
						statusDiv.innerText = `Status: Ready for ${modeText}...`;
						setAutomationState(false);
						currentCycle = 1; // Reset cycle counter to 1
					} else {
						const modeText = currentMode === 'direct' ? 'direct link traffic' : 'LEGIT ad traffic';
						statusDiv.innerText = `Status: Preparing ${modeText} automation...`;
						setAutomationState(true);
					}

					setTimeout(checkStatus, 500);
				} catch (error) {
					console.error('Status check failed:', error);
					statusDiv.innerText = 'Status: Error checking status...';
				}
			}

			// Stop automation button handler
			stopButton.addEventListener('click', async () => {
				// Show stop confirmation popup
				const modeText = currentMode === 'direct' ? 'direct link traffic' : 'LEGIT ad traffic';
				const stopContent = `
					<p style="margin-bottom: 20px; color: #f44336; font-weight: 600;">⚠️ Are you sure you want to stop the ${modeText}?</p>
					<p style="color: #ff9800; margin-bottom: 15px;">This will:</p>
					<ul style="color: #ffffff; margin-left: 20px; margin-bottom: 20px;">
						<li>Stop all ${currentMode === 'direct' ? 'direct link viewing' : 'LEGIT ad clicking'} activities</li>
						<li>Close all running browser windows</li>
						<li>End the current traffic automation ${currentMode === 'direct' ? 'loop' : 'cycle'}</li>
					</ul>
					<p style="color: #4caf50; font-weight: 600;">Any completed ${currentMode === 'direct' ? 'views' : 'profiles'} and traffic will be preserved.</p>
				`;

				showPopup(`🛑 Stop ${modeText}`, stopContent, 'Stop Traffic', true);

				// Handle stop confirmation
				popupConfirm.onclick = async () => {
					hidePopup();

					try {
						const response = await fetch('/stop-automation', {
							method: 'POST',
							headers: { 'Content-Type': 'application/json' }
						});

						const result = await response.json();

						if (result.success) {
							statusDiv.innerText = `Status: ${modeText} automation stopped`;
							setAutomationState(false);
						} else {
							console.error(`Failed to stop automation: ${result.error}`);
						}
					} catch (err) {
						console.error(`Error stopping automation: ${err.message}`);
					}
				};
			});

			// Ad Mode Form Handler
			form.addEventListener('submit', async (e) => {
				e.preventDefault();
				const formData = new FormData(form);
				const payload = Object.fromEntries(formData.entries());
				await handleAutomationStart(payload, 'ad');
			});

			// Direct Mode Form Handler  
			directForm.addEventListener('submit', async (e) => {
				e.preventDefault();
				const formData = new FormData(directForm);
				const payload = {
					// Transform direct form data to match automation format
					blogURL: formData.get('directLinkURL'),
					ProxyURL: '', // No proxy for direct links
					browser: formData.get('directBrowser'),
					openCount: 1, // Always 1 cycle for direct links
					profilesAtOnce: parseInt(formData.get('directLinkViews')),
					timeout: parseInt(formData.get('directTimeout')),
					minWaitTime: parseInt(formData.get('directMinTime')),
					maxWaitTime: parseInt(formData.get('directMaxTime')),
					directLinkViews: parseInt(formData.get('directLinkViews')),
					directLinkURL: formData.get('directLinkURL'),
					continuousMode: formData.get('continuousMode') === 'on'
				};
				await handleAutomationStart(payload, 'direct');
			});

			// Common automation start handler
			async function handleAutomationStart(payload, mode) {
				// Show start confirmation popup
				const modeText = mode === 'direct' ? 'Direct Link Views' : 'LEGIT Ad Traffic';
				const startContent = mode === 'direct' ? `
					<p style="margin-bottom: 20px; color: #ff9800; font-weight: 600;">🔗 Direct Link Traffic Configuration:</p>
					<div class="data-item">
						<span class="data-label">Target URL:</span>
						<span class="data-value">${payload.directLinkURL || payload.blogURL}</span>
					</div>
					<div class="data-item">
						<span class="data-label">Browser:</span>
						<span class="data-value">${payload.browser} (Chrome/Edge + 30% Mobile)</span>
					</div>
					<div class="data-item">
						<span class="data-label">Concurrent Limit:</span>
						<span class="data-value">${payload.directLinkViews || payload.profilesAtOnce} browsers</span>
					</div>
					<div class="data-item">
						<span class="data-label">View Duration:</span>
						<span class="data-value">${payload.minWaitTime}-${payload.maxWaitTime}s per view</span>
					</div>
					<div class="data-item">
						<span class="data-label">Mode:</span>
						<span class="data-value">${payload.continuousMode ? 'Continuous (Infinite Loop)' : 'One-time Run'}</span>
					</div>
					<p style="margin-top: 20px; color: #2196f3; font-weight: 600;">
						🔗 Mode: ${payload.continuousMode ? 'Continuous Direct Link Views' : 'Single-Run Direct Views'}<br>
						🚀 Features: ${payload.continuousMode ? 'Infinite looping, auto-replacement of completed browsers' : 'Pure page views, human-like browsing simulation'}
					</p>
				` : `
					<p style="margin-bottom: 20px; color: #ff9800; font-weight: 600;">🎯 LEGIT Ad Traffic Configuration:</p>
					<div class="data-item">
						<span class="data-label">Target Website:</span>
						<span class="data-value">${payload.blogURL}</span>
					</div>
					<div class="data-item">
						<span class="data-label">Browser:</span>
						<span class="data-value">${payload.browser} (Chrome/Edge + 30% Mobile)</span>
					</div>
					<div class="data-item">
						<span class="data-label">Cycles:</span>
						<span class="data-value">${payload.openCount}</span>
					</div>
					<div class="data-item">
						<span class="data-label">Profiles per Cycle:</span>
						<span class="data-value">${payload.profilesAtOnce}</span>
					</div>
					<div class="data-item">
						<span class="data-label">Session Time:</span>
						<span class="data-value">${payload.minWaitTime}-${payload.maxWaitTime}s</span>
					</div>
					<p style="margin-top: 20px; color: #4caf50; font-weight: 600;">
						🎯 Total Profiles: ${payload.openCount * payload.profilesAtOnce}<br>
						🚀 Features: LEGIT ad clicking, ProfitableRate/HighPerformance targeting, extended popup waits
					</p>
				`;

				showPopup(`🚀 Start ${modeText}`, startContent, `Start ${modeText}`);

				// Handle confirmation
				popupConfirm.onclick = async () => {
					hidePopup();

					// Get profiles count and create log areas
					const profilesCount = parseInt(payload.profilesAtOnce) || (mode === 'direct' ? payload.directLinkViews : 2);
					createProfileLogs(profilesCount, mode);

					// Immediately set automation state to prevent button flickering
					setAutomationState(true);
					const modeStatusText = mode === 'direct' ? 
						(payload.continuousMode ? 'continuous direct link views' : 'direct link views') : 
						'LEGIT ad traffic with focused network targeting';
					statusDiv.innerText = `Status: Starting ${modeStatusText}...`;

					try {
						const res = await fetch('/open-url', {
							method: 'POST',
							headers: { 'Content-Type': 'application/json' },
							body: JSON.stringify(payload)
						});

						const result = await res.json();

						if (result.success) {
							// Clear any existing logs and add initial messages
							clearAllProfileLogs();
							for (let i = 1; i <= profilesCount; i++) {
								const entityName = mode === 'direct' ? 'Browser' : 'Profile';
								const modeFeature = mode === 'direct' ? 
									(payload.continuousMode ? 'continuous direct link traffic' : 'direct link traffic') : 
									'LEGIT ad network targeting';
								
								appendProfileLog(i, `🚀 Starting ${entityName} ${i}`);
								appendProfileLog(i, `🎯 ${mode === 'direct' ? 'Direct link' : 'LEGIT ad'} ${modeFeature} enabled`);
								
								if (mode === 'ad') {
									appendProfileLog(i, `📊 ProfitableRate & HighPerformance detection active`);
								} else {
									appendProfileLog(i, `📊 Human-like browsing simulation active`);
									if (payload.continuousMode) {
										appendProfileLog(i, `🔄 Continuous mode - will auto-restart when completed`);
									}
								}
								
								appendProfileLog(i, `⏳ Waiting for automation to start...`);
							}
						} else {
							console.error(`Failed: ${result.error}`);
							// Reset state if automation failed to start
							setAutomationState(false);
							statusDiv.innerText = `Status: Failed to start ${modeStatusText} automation`;
						}
					} catch (err) {
						console.error(`Error: ${err.message}`);
						// Reset state if there was an error
						setAutomationState(false);
						statusDiv.innerText = `Status: Error starting ${modeStatusText} automation`;
					}
				};
			}

			checkStatus();

			// Connect to log stream when page loads
			connectToLogStream();
		</script>
	</body>
</html>